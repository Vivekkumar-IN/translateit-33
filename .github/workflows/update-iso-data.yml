name: Update ISO Language Data

on:
  schedule:
    - cron: '0 0 * * *'  # Daily at midnight UTC
  workflow_dispatch:

permissions:
  contents: write

jobs:
  update-iso-data:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Fetch ISO 639-1 JSON data
        run: |
          mkdir -p src/data
          curl -sSL "https://raw.githubusercontent.com/ihmpavel/all-iso-language-codes/master/data/en/639-1.json" -o src/data/iso639-1.json
          echo "ISO 639-1 language data updated."

      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Update ISO 639-1 language data"
          commit_options: "--no-verify"
          commit_user_name: "github-actions[bot]"
          commit_user_email: "41898282+github-actions[bot]@users.noreply.github.com"
          commit_author: "github-actions[bot] <41898282+github-actions[bot]@users.noreply.github.com>"